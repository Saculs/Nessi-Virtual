 Particle3D = function(material) {
        THREE.Sprite.call(this, material);

        //this.material = material instanceof Array ? material : [ material ];
        // define properties
        this.velocity = new THREE.Vector3(0, -8, 0);
        this.velocity.rotateX(randomRange(-45, 45));
        this.velocity.rotateY(randomRange(0, 360));
        this.gravity = new THREE.Vector3(0, 0, 0);
        this.drag = 1;
        // methods...
    };

    Particle3D.prototype = new THREE.Sprite();
    Particle3D.prototype.constructor = Particle3D;

    Particle3D.prototype.updatePhysics = function() {
        this.velocity.multiplyScalar(this.drag);
        this.velocity.add(this.gravity);
        this.position.add(this.velocity);
    }

    THREE.Vector3.prototype.rotateY = function(angle) {
        cosRY = Math.cos(angle * TO_RADIANS);
        sinRY = Math.sin(angle * TO_RADIANS);

        var tempz = this.z;;
        var tempx = this.x;

        this.x = (tempx * cosRY) + (tempz * sinRY);
        this.z = (tempx * -sinRY) + (tempz * cosRY);
    }

    THREE.Vector3.prototype.rotateX = function(angle) {
        cosRY = Math.cos(angle * TO_RADIANS);
        sinRY = Math.sin(angle * TO_RADIANS);

        var tempz = this.z;;
        var tempy = this.y;

        this.y = (tempy * cosRY) + (tempz * sinRY);
        this.z = (tempy * -sinRY) + (tempz * cosRY);
    }

    THREE.Vector3.prototype.rotateZ = function(angle) {
        cosRY = Math.cos(angle * TO_RADIANS);
        sinRY = Math.sin(angle * TO_RADIANS);

        var tempx = this.x;;
        var tempy = this.y;

        this.y = (tempy * cosRY) + (tempx * sinRY);
        this.x = (tempy * -sinRY) + (tempx * cosRY);
    }

    // returns a random number between the two limits provided

    function randomRange(min, max) {
        return ((Math.random() * (max - min)) + min);
    }

    var particle;

    var particles = [];

    function init() {


        var material = new THREE.SpriteMaterial( { map: new THREE.TextureLoader().load('http://i.imgur.com/cTALZ.png') } );

        for (var i = 0; i < 500; i++) {

            particle = new Particle3D( material);
            particle.position.x = Math.random() * 2000 - 1000;
            particle.position.y = Math.random() * 2000 - 1000;
            particle.position.z = Math.random() * 2000 - 1000;
            particle.scale.x = 22;
            particle.scale.y = 22;
            scene.add( particle );

            particles.push(particle);
        }

        setInterval(loop, 1000 / 60);

    }


    function loop() {
        console.log('loop');

        for(var i = 0; i<particles.length; i++) {

            var particle = particles[i];
            particle.updatePhysics();

            with(particle.position) {
                if(y < -1000) y+=2000;
                if(x>1000) x-=2000;
                else if(x<-1000) x+=2000;
                if(z>1000) z-=2000;
                else if(z<-1000) z+=2000;
            }
        }


    }

